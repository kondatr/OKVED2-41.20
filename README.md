<h1 align="center">Анализ российского рынка отрасли "Строительство жилых и нежилых помещений"</h1> 
## 1. Немного об отрасли
______
## 2. Сбор датасета
______
1) Соберем ИНН строительных компаний из `единого реестра субъектов малого и среднего предпринимательства ФНС`. С ресурса https://ofd.nalog.ru/ выгрузим нужные нам данные в формате .xlsx и отсортируем по виду деятельности(ОКВЭД 41.20) и категории(малые и средние предприятия)![reestr.png](attachment:63f56a1a-98b5-4c29-8eed-4abbcd9f7865.png)
2) Для получения финансовых показателей компаний обратимся к ресурсу БФО (https://bo.nalog.ru/). Спарсим id компаний с помощью следующего запроса:
```python
    res = session.get(f"https://bo.nalog.ru/advanced-search/organizations/search?query={<ИНН компании>}&page=0").json()
    org_id = res["content"][0]["id"]
```3) Далее будем взаимодейстовать со "спрятанным" API, используя запрос:
```python
    res = session.get(f"https://bo.nalog.ru/nbo/organizations/{<id компании>}/bfo/", headers=headers).json()
```
    Из полученного .json объекта достаем общую информацию о компании (название, адрес...), ее финансовые показатели за 2019-2023 года (при их наличии). После чего записываем эти данные в .csv файл для дальнейшей с ними работы.
4) Для анализа распределения компаний по регионам России нам нужно получить геоданные о компаниях, а именно их координаты широты и долготы. Для этого, к примеру, можно воспользоваться API геокодера от Яндекс. Так как ранее мы уже собрали адреса компаний, то пишем запрос:
```python
    params = {"apikey": "*******-****-****-****-************", "geocode": {<адрес компании>}, "lang": "ru_RU"}
    res = requests.get("https://geocode-maps.yandex.ru/1.x", params=params)
```
    Из полученного .xml объекта извлекаем широту и долготу и записываем их в отдельный .csv файл для удобства.
5) Осталось скачать карту России с размеченными регионами в формате .geojson для работы с geopandas. Это можно сделать, использовав данный ресурс https://simplemaps.com/gis/country/ru#all.
    Датасет готов! Перейдем к визуализации данных...
## 3. Визуализация и анализ
______
